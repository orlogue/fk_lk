!function(){var n={99:function(ae,e,t){var n;void 0!==(t="function"==typeof(n=function(){if(typeof Promise!=="function")!function(e){function n(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(e,n(r,this),n(i,this))}function o(n){var r=this;return null===this._state?void this._deferreds.push(n):void c(function(){var e=r._state?n.onFulfilled:n.onRejected;if(null===e)return void(r._state?n.resolve:n.reject)(r._value);var t;try{t=e(r._value)}catch(e){return void n.reject(e)}n.resolve(t)})}function r(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var t=e.then;if("function"===typeof t)return void u(n(t,e),n(r,this),n(i,this))}this._state=!0,this._value=e,s.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;t>e;e++)o.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,n,r){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.resolve=n,this.reject=r}function u(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}var t=setTimeout,c="function"===typeof setImmediate&&setImmediate||function(e){t(e,1)},f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};a.prototype["catch"]=function(e){return this.then(null,e)},a.prototype.then=function(n,r){var i=this;return new a(function(e,t){o.call(i,new l(n,r,e,t))})},a.all=function(){var s=Array.prototype.slice.call(1===arguments.length&&f(arguments[0])?arguments[0]:arguments);return new a(function(r,i){function a(t,e){try{if(e&&("object"===typeof e||"function"===typeof e)){var n=e.then;if("function"===typeof n)return void n.call(e,function(e){a(t,e)},i)}s[t]=e,0===--o&&r(s)}catch(e){i(e)}}if(0===s.length)return r([]);for(var o=s.length,e=0;e<s.length;e++)a(e,s[e])})},a.resolve=function(t){return t&&"object"===typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(n){return new a(function(e,t){t(n)})},a.race=function(i){return new a(function(e,t){for(var n=0,r=i.length;r>n;n++)i[n].then(e,t)})},a._setImmediateFn=function(e){c=e},true&&ae.exports?ae.exports=a:e.Promise||(e.Promise=a)}(this);if(typeof window!=="undefined"&&typeof window.CustomEvent!=="function")(function(){function e(e,t){t=t||{bubbles:false,cancelable:false,detail:undefined};var n=document.createEvent("CustomEvent");n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return n}e.prototype=window.Event.prototype;window.CustomEvent=e})();if(typeof HTMLCanvasElement!=="undefined"&&!HTMLCanvasElement.prototype.toBlob)Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){var r=atob(this.toDataURL(t,n).split(",")[1]),i=r.length,a=new Uint8Array(i);for(var o=0;o<i;o++)a[o]=r.charCodeAt(o);e(new Blob([a],{type:t||"image/png"}))}});var r=["Webkit","Moz","ms"],i=typeof document!=="undefined"?document.createElement("div").style:{},a=[1,8,3,6],o=[2,7,4,5],v,g,w;function e(e){if(e in i)return e;var t=e[0].toUpperCase()+e.slice(1),n=r.length;while(n--){e=r[n]+t;if(e in i)return e}}function s(e,t){var n=a.indexOf(e)>-1?a:o,r=n.indexOf(e),i=t/90%n.length;return n[(n.length+r+i%n.length)%n.length]}function d(e,t){e=e||{};for(var n in t)if(t[n]&&t[n].constructor&&t[n].constructor===Object){e[n]=e[n]||{};d(e[n],t[n])}else e[n]=t[n];return e}function h(e){return d({},e)}function t(i,a,o){var s;return function(){var e=this,t=arguments;var n=function(){s=null;if(!o)i.apply(e,t)};var r=o&&!s;clearTimeout(s);s=setTimeout(n,a);if(r)i.apply(e,t)}}function y(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",false,true);e.dispatchEvent(t)}else e.fireEvent("onchange")}function b(e,t,n){if(typeof t==="string"){var r=t;t={};t[r]=n}for(var i in t)e.style[i]=t[i]}function x(e,t){if(e.classList)e.classList.add(t);else e.className+=" "+t}function n(e,t){if(e.classList)e.classList.remove(t);else e.className=e.className.replace(t,"")}function u(e,t){for(var n in t)e.setAttribute(n,t[n])}function C(e){return parseInt(e,10)}function D(r,i){if(!r)throw"Source image missing";var a=new Image;a.style.opacity="0";return new Promise(function(e,t){function n(){a.style.opacity="1";setTimeout(function(){e(a)},1)}a.removeAttribute("crossOrigin");if(r.match(/^https?:\/\/|^\/\//))a.setAttribute("crossOrigin","anonymous");a.onload=function(){if(i)EXIF.getData(a,function(){n()});else n()};a.onerror=function(e){a.style.opacity=1;setTimeout(function(){t(e)},1)};a.src=r})}function m(e,t){var n=e.naturalWidth;var r=e.naturalHeight;var i=t||l(e);if(i&&i>=5){var a=n;n=r;r=a}return{width:n,height:r}}var g=e("transform"),v=e("transformOrigin"),w=e("userSelect"),j={translate3d:{suffix:", 0px"},translate:{suffix:""}},S=function(e,t,n){this.x=parseFloat(e);this.y=parseFloat(t);this.scale=parseFloat(n)},E=(S.parse=function(e){if(e.style)return S.parse(e.style[g]);else if(e.indexOf("matrix")>-1||e.indexOf("none")>-1)return S.fromMatrix(e);else return S.fromString(e)},S.fromMatrix=function(e){var t=e.substring(7).split(",");if(!t.length||e==="none")t=[1,0,0,1,0,0];return new S(C(t[4]),C(t[5]),parseFloat(t[0]))},S.fromString=function(e){var t=e.split(") "),n=t[0].substring(z.globals.translate.length+1).split(","),r=t.length>1?t[1].substring(6):1,i=n.length>1?n[0]:0,a=n.length>1?n[1]:0;return new S(i,a,r)},S.prototype.toString=function(){var e=j[z.globals.translate].suffix||"";return z.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"},function(e){if(!e||!e.style[v]){this.x=0;this.y=0;return}var t=e.style[v].split(" ");this.x=parseFloat(t[0]);this.y=parseFloat(t[1])});function l(e){return e.exifdata&&e.exifdata.Orientation?C(e.exifdata.Orientation):1}function c(e,t,n){var r=t.width,i=t.height,a=e.getContext("2d");e.width=t.width;e.height=t.height;a.save();switch(n){case 2:a.translate(r,0);a.scale(-1,1);break;case 3:a.translate(r,i);a.rotate(180*Math.PI/180);break;case 4:a.translate(0,i);a.scale(1,-1);break;case 5:e.width=i;e.height=r;a.rotate(90*Math.PI/180);a.scale(1,-1);break;case 6:e.width=i;e.height=r;a.rotate(90*Math.PI/180);a.translate(0,-i);break;case 7:e.width=i;e.height=r;a.rotate(-90*Math.PI/180);a.translate(-r,i);a.scale(1,-1);break;case 8:e.width=i;e.height=r;a.translate(0,r);a.rotate(-90*Math.PI/180);break}a.drawImage(t,0,0,r,i);a.restore()}function R(){var e=this,t="croppie-container",n=e.options.viewport.type?"cr-vp-"+e.options.viewport.type:null,r,i,a,o,s,l;e.options.useCanvas=e.options.enableOrientation||P.call(e);e.data={};e.elements={};r=e.elements.boundary=document.createElement("div");a=e.elements.viewport=document.createElement("div");i=e.elements.img=document.createElement("img");o=e.elements.overlay=document.createElement("div");if(e.options.useCanvas){e.elements.canvas=document.createElement("canvas");e.elements.preview=e.elements.canvas}else e.elements.preview=i;x(r,"cr-boundary");r.setAttribute("aria-dropeffect","none");s=e.options.boundary.width;l=e.options.boundary.height;b(r,{width:s+(isNaN(s)?"":"px"),height:l+(isNaN(l)?"":"px")});x(a,"cr-viewport");if(n)x(a,n);b(a,{width:e.options.viewport.width+"px",height:e.options.viewport.height+"px"});a.setAttribute("tabindex",0);x(e.elements.preview,"cr-image");u(e.elements.preview,{alt:"preview","aria-grabbed":"false"});x(o,"cr-overlay");e.element.appendChild(r);r.appendChild(e.elements.preview);r.appendChild(a);r.appendChild(o);x(e.element,t);if(e.options.customClass)x(e.element,e.options.customClass);I.call(this);if(e.options.enableZoom)H.call(e);if(e.options.enableResize)F.call(e)}function P(){return this.options.enableExif&&window.EXIF}function F(){var l=this;var u=document.createElement("div");var r=false;var c;var f;var p;var d=50;var h;var m;var e;var t;x(u,"cr-resizer");b(u,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"});if(this.options.resizeControls.height){e=document.createElement("div");x(e,"cr-resizer-vertical");u.appendChild(e)}if(this.options.resizeControls.width){t=document.createElement("div");x(t,"cr-resizer-horisontal");u.appendChild(t)}function n(e){if(e.button!==undefined&&e.button!==0)return;e.preventDefault();if(r)return;var t=l.elements.overlay.getBoundingClientRect();r=true;f=e.pageX;p=e.pageY;c=e.currentTarget.className.indexOf("vertical")!==-1?"v":"h";h=t.width;m=t.height;if(e.touches){var n=e.touches[0];f=n.pageX;p=n.pageY}window.addEventListener("mousemove",i);window.addEventListener("touchmove",i);window.addEventListener("mouseup",a);window.addEventListener("touchend",a);document.body.style[w]="none"}function i(e){var t=e.pageX;var n=e.pageY;e.preventDefault();if(e.touches){var r=e.touches[0];t=r.pageX;n=r.pageY}var i=t-f;var a=n-p;var o=l.options.viewport.height+a;var s=l.options.viewport.width+i;if(c==="v"&&o>=d&&o<=m){b(u,{height:o+"px"});l.options.boundary.height+=a;b(l.elements.boundary,{height:l.options.boundary.height+"px"});l.options.viewport.height+=a;b(l.elements.viewport,{height:l.options.viewport.height+"px"})}else if(c==="h"&&s>=d&&s<=h){b(u,{width:s+"px"});l.options.boundary.width+=i;b(l.elements.boundary,{width:l.options.boundary.width+"px"});l.options.viewport.width+=i;b(l.elements.viewport,{width:l.options.viewport.width+"px"})}M.call(l);A.call(l);k.call(l);_.call(l);p=n;f=t}function a(){r=false;window.removeEventListener("mousemove",i);window.removeEventListener("touchmove",i);window.removeEventListener("mouseup",a);window.removeEventListener("touchend",a);document.body.style[w]=""}if(e){e.addEventListener("mousedown",n);e.addEventListener("touchstart",n)}if(t){t.addEventListener("mousedown",n);t.addEventListener("touchstart",n)}this.elements.boundary.appendChild(u)}function N(e){if(this.options.enableZoom){var t=this.elements.zoomer,n=O(e,4);t.value=Math.max(parseFloat(t.min),Math.min(parseFloat(t.max),n)).toString()}}function H(){var r=this,e=r.elements.zoomerWrap=document.createElement("div"),t=r.elements.zoomer=document.createElement("input");x(e,"cr-slider-wrap");x(t,"cr-slider");t.type="range";t.step="0.0001";t.value="1";t.style.display=r.options.showZoomer?"":"none";t.setAttribute("aria-label","zoom");r.element.appendChild(e);e.appendChild(t);r._currentZoom=1;function i(){$.call(r,{value:parseFloat(t.value),origin:new E(r.elements.preview),viewportRect:r.elements.viewport.getBoundingClientRect(),transform:S.parse(r.elements.preview)})}function n(e){var t,n;if(r.options.mouseWheelZoom==="ctrl"&&e.ctrlKey!==true)return 0;else if(e.wheelDelta)t=e.wheelDelta/1200;else if(e.deltaY)t=e.deltaY/1060;else if(e.detail)t=e.detail/-60;else t=0;n=r._currentZoom+t*r._currentZoom;e.preventDefault();N.call(r,n);i.call(r)}r.elements.zoomer.addEventListener("input",i);r.elements.zoomer.addEventListener("change",i);if(r.options.mouseWheelZoom){r.elements.boundary.addEventListener("mousewheel",n);r.elements.boundary.addEventListener("DOMMouseScroll",n)}}function $(e){var t=this,n=e?e.transform:S.parse(t.elements.preview),r=e?e.viewportRect:t.elements.viewport.getBoundingClientRect(),i=e?e.origin:new E(t.elements.preview);function a(){var e={};e[g]=n.toString();e[v]=i.toString();b(t.elements.preview,e)}t._currentZoom=e?e.value:t._currentZoom;n.scale=t._currentZoom;t.elements.zoomer.setAttribute("aria-valuenow",t._currentZoom);a();if(t.options.enforceBoundary){var o=B.call(t,r),s=o.translate,l=o.origin;if(n.x>=s.maxX){i.x=l.minX;n.x=s.maxX}if(n.x<=s.minX){i.x=l.maxX;n.x=s.minX}if(n.y>=s.maxY){i.y=l.minY;n.y=s.maxY}if(n.y<=s.minY){i.y=l.maxY;n.y=s.minY}}a();Z.call(t);_.call(t)}function B(e){var t=this,n=t._currentZoom,r=e.width,i=e.height,a=t.elements.boundary.clientWidth/2,o=t.elements.boundary.clientHeight/2,s=t.elements.preview.getBoundingClientRect(),l=s.width,u=s.height,c=r/2,f=i/2;var p=(c/n-a)*-1;var d=p-(l*(1/n)-r*(1/n));var h=(f/n-o)*-1;var m=h-(u*(1/n)-i*(1/n));var v=1/n*c;var g=l*(1/n)-v;var w=1/n*f;var y=u*(1/n)-w;return{translate:{maxX:p,minX:d,maxY:h,minY:m},origin:{maxX:g,minX:v,maxY:y,minY:w}}}function k(e){var t=this,n=t._currentZoom,r=t.elements.preview.getBoundingClientRect(),i=t.elements.viewport.getBoundingClientRect(),a=S.parse(t.elements.preview.style[g]),o=new E(t.elements.preview),s=i.top-r.top+i.height/2,l=i.left-r.left+i.width/2,u={},c={};if(e){var f=o.x;var p=o.y;var d=a.x;var h=a.y;u.y=f;u.x=p;a.y=d;a.x=h}else{u.y=s/n;u.x=l/n;c.y=(u.y-o.y)*(1-n);c.x=(u.x-o.x)*(1-n);a.x-=c.x;a.y-=c.y}var m={};m[v]=u.x+"px "+u.y+"px";m[g]=a.toString();b(t.elements.preview,m)}function I(){var f=this,n=false,p,d,h,l,m;function v(e,t){var n=f.elements.preview.getBoundingClientRect(),r=m.y+t,i=m.x+e;if(f.options.enforceBoundary){if(l.top>n.top+t&&l.bottom<n.bottom+t)m.y=r;if(l.left>n.left+e&&l.right<n.right+e)m.x=i}else{m.y=r;m.x=i}}function r(e){f.elements.preview.setAttribute("aria-grabbed",e);f.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function e(e){var t=37,n=38,r=39,i=40;if(e.shiftKey&&(e.keyCode===n||e.keyCode===i)){var a;if(e.keyCode===n)a=parseFloat(f.elements.zoomer.value)+parseFloat(f.elements.zoomer.step);else a=parseFloat(f.elements.zoomer.value)-parseFloat(f.elements.zoomer.step);f.setZoom(a)}else if(f.options.enableKeyMovement&&(e.keyCode>=37&&e.keyCode<=40)){e.preventDefault();var o=s(e.keyCode);m=S.parse(f.elements.preview);document.body.style[w]="none";l=f.elements.viewport.getBoundingClientRect();u(o)}function s(e){switch(e){case t:return[1,0];case n:return[0,1];case r:return[-1,0];case i:return[0,-1]}}}function u(e){var t=e[0],n=e[1],r={};v(t,n);r[g]=m.toString();b(f.elements.preview,r);M.call(f);document.body.style[w]="";k.call(f);_.call(f);h=0}function t(e){if(e.button!==undefined&&e.button!==0)return;e.preventDefault();if(n)return;n=true;p=e.pageX;d=e.pageY;if(e.touches){var t=e.touches[0];p=t.pageX;d=t.pageY}r(n);m=S.parse(f.elements.preview);window.addEventListener("mousemove",i);window.addEventListener("touchmove",i);window.addEventListener("mouseup",a);window.addEventListener("touchend",a);document.body.style[w]="none";l=f.elements.viewport.getBoundingClientRect()}function i(e){e.preventDefault();var t=e.pageX,n=e.pageY;if(e.touches){var r=e.touches[0];t=r.pageX;n=r.pageY}var i=t-p,a=n-d,o={};if(e.type==="touchmove")if(e.touches.length>1){var s=e.touches[0];var l=e.touches[1];var u=Math.sqrt((s.pageX-l.pageX)*(s.pageX-l.pageX)+(s.pageY-l.pageY)*(s.pageY-l.pageY));if(!h)h=u/f._currentZoom;var c=u/h;N.call(f,c);y(f.elements.zoomer);return}v(i,a);o[g]=m.toString();b(f.elements.preview,o);M.call(f);d=n;p=t}function a(){n=false;r(n);window.removeEventListener("mousemove",i);window.removeEventListener("touchmove",i);window.removeEventListener("mouseup",a);window.removeEventListener("touchend",a);document.body.style[w]="";k.call(f);_.call(f);h=0}f.elements.overlay.addEventListener("mousedown",t);f.elements.viewport.addEventListener("keydown",e);f.elements.overlay.addEventListener("touchstart",t)}function M(){if(!this.elements)return;var e=this,t=e.elements.boundary.getBoundingClientRect(),n=e.elements.preview.getBoundingClientRect();b(e.elements.overlay,{width:n.width+"px",height:n.height+"px",top:n.top-t.top+"px",left:n.left-t.left+"px"})}E.prototype.toString=function(){return this.x+"px "+this.y+"px"};var Z=t(M,500);function _(){var e=this,t=e.get();if(!f.call(e))return;e.options.update.call(e,t);if(e.$&&typeof Prototype==="undefined")e.$(e.element).trigger("update.croppie",t);else{var n;if(window.CustomEvent)n=new CustomEvent("update",{detail:t});else{n=document.createEvent("CustomEvent");n.initCustomEvent("update",true,true,t)}e.element.dispatchEvent(n)}}function f(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function L(){var e=this,t=1,n={},r=e.elements.preview,i,a=new S(0,0,t),o=new E,s=f.call(e);if(!s||e.data.bound)return;e.data.bound=true;n[g]=a.toString();n[v]=o.toString();n["opacity"]=1;b(r,n);i=e.elements.preview.getBoundingClientRect();e._originalImageWidth=i.width;e._originalImageHeight=i.height;e.data.orientation=P.call(e)?l(e.elements.img):e.data.orientation;if(e.options.enableZoom)A.call(e,true);else e._currentZoom=t;a.scale=e._currentZoom;n[g]=a.toString();b(r,n);if(e.data.points.length)X.call(e,e.data.points);else Y.call(e);k.call(e);M.call(e)}function A(e){var t=this,n=Math.max(t.options.minZoom,0)||0,r=t.options.maxZoom||1.5,i,a,o=t.elements.zoomer,s=parseFloat(o.value),l=t.elements.boundary.getBoundingClientRect(),u=m(t.elements.img,t.data.orientation),c=t.elements.viewport.getBoundingClientRect(),f,p;if(t.options.enforceBoundary){f=c.width/u.width;p=c.height/u.height;n=Math.max(f,p)}if(n>=r)r=n+1;o.min=O(n,4);o.max=O(r,4);if(!e&&(s<o.min||s>o.max))N.call(t,s<o.min?o.min:o.max);else if(e){a=Math.max(l.width/u.width,l.height/u.height);i=t.data.boundZoom!==null?t.data.boundZoom:a;N.call(t,i)}y(o)}function X(e){if(e.length!==4)throw"Croppie - Invalid number of points supplied: "+e;var t=this,n=e[2]-e[0],r=t.elements.viewport.getBoundingClientRect(),i=t.elements.boundary.getBoundingClientRect(),a={left:r.left-i.left,top:r.top-i.top},o=r.width/n,s=e[1],l=e[0],u=-1*e[1]+a.top,c=-1*e[0]+a.left,f={};f[v]=l+"px "+s+"px";f[g]=new S(c,u,o).toString();b(t.elements.preview,f);N.call(t,o);t._currentZoom=o}function Y(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),r=e.elements.boundary.getBoundingClientRect(),i=n.left-r.left,a=n.top-r.top,o=i-(t.width-n.width)/2,s=a-(t.height-n.height)/2,l=new S(o,s,e._currentZoom);b(e.elements.preview,g,l.toString())}function W(e){var t=this,n=t.elements.canvas,r=t.elements.img,i=n.getContext("2d");i.clearRect(0,0,n.width,n.height);n.width=r.width;n.height=r.height;var a=t.options.enableOrientation&&e||l(r);c(n,r,a)}function V(e){var t=this,n=e.points,r=C(n[0]),i=C(n[1]),a=C(n[2]),o=C(n[3]),s=a-r,l=o-i,u=e.circle,c=document.createElement("canvas"),f=c.getContext("2d"),p=0,d=0,h=e.outputWidth||s,m=e.outputHeight||l;c.width=h;c.height=m;if(e.backgroundColor){f.fillStyle=e.backgroundColor;f.fillRect(0,0,h,m)}var v=r,g=i,w=s,y=l,b=0,x=0,S=h,E=m;if(r<0){v=0;b=Math.abs(r)/s*h}if(w+v>t._originalImageWidth){w=t._originalImageWidth-v;S=w/s*h}if(i<0){g=0;x=Math.abs(i)/l*m}if(y+g>t._originalImageHeight){y=t._originalImageHeight-g;E=y/l*m}f.drawImage(this.elements.preview,v,g,w,y,b,x,S,E);if(u){f.fillStyle="#fff";f.globalCompositeOperation="destination-in";f.beginPath();f.arc(c.width/2,c.height/2,c.width/2,0,Math.PI*2,true);f.closePath();f.fill()}return c}function q(e){var t=e.points,n=document.createElement("div"),r=document.createElement("img"),i=t[2]-t[0],a=t[3]-t[1];x(n,"croppie-result");n.appendChild(r);b(r,{left:-1*t[0]+"px",top:-1*t[1]+"px"});r.src=e.url;b(n,{width:i+"px",height:a+"px"});return n}function K(e){return V.call(this,e).toDataURL(e.format,e.quality)}function Q(e){var n=this;return new Promise(function(t){V.call(n,e).toBlob(function(e){t(e)},e.format,e.quality)})}function G(t){if(this.elements.img.parentNode){Array.prototype.forEach.call(this.elements.img.classList,function(e){t.classList.add(e)});this.elements.img.parentNode.replaceChild(t,this.elements.img);this.elements.preview=t}this.elements.img=t}function p(f,p){var d=this,e,h=[],t=null,n=P.call(d);if(typeof f==="string"){e=f;f={}}else if(Array.isArray(f))h=f.slice();else if(typeof f==="undefined"&&d.data.url){L.call(d);_.call(d);return null}else{e=f.url;h=f.points||[];t=typeof f.zoom==="undefined"?null:f.zoom}d.data.bound=false;d.data.url=e||d.data.url;d.data.boundZoom=t;return D(e,n).then(function(e){G.call(d,e);if(!h.length){var t=m(e);var n=d.elements.viewport.getBoundingClientRect();var r=n.width/n.height;var i=t.width/t.height;var a,o;if(i>r){o=t.height;a=o*r}else{a=t.width;o=t.height/r}var s=(t.width-a)/2;var l=(t.height-o)/2;var u=s+a;var c=l+o;d.data.points=[s,l,u,c]}else if(d.options.relative)h=[h[0]*e.naturalWidth/100,h[1]*e.naturalHeight/100,h[2]*e.naturalWidth/100,h[3]*e.naturalHeight/100];d.data.orientation=f.orientation||1;d.data.points=h.map(function(e){return parseFloat(e)});if(d.options.useCanvas)W.call(d,d.data.orientation);L.call(d);_.call(d);p&&p()})}function O(e,t){return parseFloat(e).toFixed(t||0)}function T(){var e=this,t=e.elements.preview.getBoundingClientRect(),n=e.elements.viewport.getBoundingClientRect(),r=n.left-t.left,i=n.top-t.top,a=(n.width-e.elements.viewport.offsetWidth)/2,o=(n.height-e.elements.viewport.offsetHeight)/2,s=r+e.elements.viewport.offsetWidth+a,l=i+e.elements.viewport.offsetHeight+o,u=e._currentZoom;if(u===Infinity||isNaN(u))u=1;var c=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;r=Math.max(c,r/u);i=Math.max(c,i/u);s=Math.max(c,s/u);l=Math.max(c,l/u);return{points:[O(r),O(i),O(s),O(l)],zoom:u,orientation:e.data.orientation}}var J={type:"canvas",format:"png",quality:1},ee=["jpeg","webp","png"];function te(e){var t=this,n=T.call(t),r=d(h(J),h(e)),i=typeof e==="string"?e:r.type||"base64",a=r.size||"viewport",o=r.format,s=r.quality,l=r.backgroundColor,u=typeof r.circle==="boolean"?r.circle:t.options.viewport.type==="circle",c=t.elements.viewport.getBoundingClientRect(),f=c.width/c.height,p;if(a==="viewport"){n.outputWidth=c.width;n.outputHeight=c.height}else if(typeof a==="object")if(a.width&&a.height){n.outputWidth=a.width;n.outputHeight=a.height}else if(a.width){n.outputWidth=a.width;n.outputHeight=a.width/f}else if(a.height){n.outputWidth=a.height*f;n.outputHeight=a.height}if(ee.indexOf(o)>-1){n.format="image/"+o;n.quality=s}n.circle=u;n.url=t.data.url;n.backgroundColor=l;p=new Promise(function(e){switch(i.toLowerCase()){case"rawcanvas":e(V.call(t,n));break;case"canvas":case"base64":e(K.call(t,n));break;case"blob":Q.call(t,n).then(e);break;default:e(q.call(t,n));break}});return p}function ne(){L.call(this)}function re(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t=this,n=t.elements.canvas;t.data.orientation=s(t.data.orientation,e);c(n,t.elements.img,t.data.orientation);k.call(t,true);A.call(t);if(Math.abs(e)/90%2===1){var r=t._originalImageHeight;var i=t._originalImageWidth;t._originalImageWidth=r;t._originalImageHeight=i}}function ie(){var e=this;e.element.removeChild(e.elements.boundary);n(e.element,"croppie-container");if(e.options.enableZoom)e.element.removeChild(e.elements.zoomerWrap);delete e.elements}if(typeof window!=="undefined"&&window.jQuery){var U=window.jQuery;U.fn.croppie=function(n){var e=typeof n;if(e==="string"){var r=Array.prototype.slice.call(arguments,1);var t=U(this).data("croppie");if(n==="get")return t.get();else if(n==="result")return t.result.apply(t,r);else if(n==="bind")return t.bind.apply(t,r);return this.each(function(){var e=U(this).data("croppie");if(!e)return;var t=e[n];if(U.isFunction(t)){t.apply(e,r);if(n==="destroy")U(this).removeData("croppie")}else throw"Croppie "+n+" method not found"})}else return this.each(function(){var e=new z(this,n);e.$=U;U(this).data("croppie",e)})}}function z(e,t){if(e.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");this.element=e;this.options=d(h(z.defaults),t);if(this.element.tagName.toLowerCase()==="img"){var n=this.element;x(n,"cr-original-image");u(n,{"aria-hidden":"true",alt:""});var r=document.createElement("div");this.element.parentNode.appendChild(r);r.appendChild(n);this.element=r;this.options.url=this.options.url||n.src}R.call(this);if(this.options.url){var i={url:this.options.url,points:this.options.points};delete this.options["url"];delete this.options["points"];p.call(this,i)}}return z.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:true,leftClass:"",rightClass:""},resizeControls:{width:true,height:true},customClass:"",showZoomer:true,enableZoom:true,enableResize:false,mouseWheelZoom:true,enableExif:false,enforceBoundary:true,enableOrientation:false,enableKeyMovement:true,update:function(){}},z.globals={translate:"translate3d"},d(z.prototype,{bind:function(e,t){return p.call(this,e,t)},get:function(){var e=T.call(this);var t=e.points;if(this.options.relative){t[0]/=this.elements.img.naturalWidth/100;t[1]/=this.elements.img.naturalHeight/100;t[2]/=this.elements.img.naturalWidth/100;t[3]/=this.elements.img.naturalHeight/100}return e},result:function(e){return te.call(this,e)},refresh:function(){return ne.call(this)},setZoom:function(e){N.call(this,e);y(this.elements.zoomer)},rotate:function(e){re.call(this,e)},destroy:function(){return ie.call(this)}}),z})?n.call(e,t,e,ae):n)&&(ae.exports=t)},211:function(e,t){!function(xe){"use strict";xe.PipsMode=void 0;var e=xe.PipsMode||(xe.PipsMode={}),t=(e["Range"]="range",e["Steps"]="steps",e["Positions"]="positions",e["Count"]="count",e["Values"]="values",xe.PipsType=void 0,xe.PipsType||(xe.PipsType={}));function n(e){return r(e)&&typeof e.from==="function"}function r(e){return typeof e==="object"&&typeof e.to==="function"}function Se(e){e.parentElement.removeChild(e)}function Ee(e){return e!==null&&e!==undefined}function Ce(e){e.preventDefault()}function Pe(e){return e.filter(function(e){return!this[e]?this[e]=true:false},{})}function s(e,t){return Math.round(e/t)*t}function Ne(e,t){var n=e.getBoundingClientRect();var r=e.ownerDocument;var i=r.documentElement;var a=Oe(r);if(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent))a.x=0;return t?n.top+a.y-i.clientTop:n.left+a.x-i.clientLeft}function o(e){return typeof e==="number"&&!isNaN(e)&&isFinite(e)}function ke(e,t,n){if(n>0){Le(e,t);setTimeout(function(){Ae(e,t)},n)}}function Me(e){return Math.max(Math.min(e,100),0)}function _e(e){return Array.isArray(e)?e:[e]}function i(e){e=String(e);var t=e.split(".");return t.length>1?t[1].length:0}function Le(e,t){if(e.classList&&!/\s/.test(t))e.classList.add(t);else e.className+=" "+t}function Ae(e,t){if(e.classList&&!/\s/.test(t))e.classList.remove(t);else e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function Ve(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function Oe(e){var t=window.pageXOffset!==undefined;var n=(e.compatMode||"")==="CSS1Compat";var r=t?window.pageXOffset:n?e.documentElement.scrollLeft:e.body.scrollLeft;var i=t?window.pageYOffset:n?e.documentElement.scrollTop:e.body.scrollTop;return{x:r,y:i}}function Te(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function Ue(){var e=false;try{var t=Object.defineProperty({},"passive",{get:function(){e=true}});window.addEventListener("test",null,t)}catch(e){}return e}function ze(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function l(e,t){return 100/(t-e)}function a(e,t,n){return t*100/(e[n+1]-e[n])}function u(e,t){return a(e,e[0]<0?t+Math.abs(e[0]):t-e[0],0)}function c(e,t){return t*(e[1]-e[0])/100+e[0]}function f(e,t){var n=1;while(e>=t[n])n+=1;return n}function p(e,t,n){if(n>=e.slice(-1)[0])return 100;var r=f(n,e);var i=e[r-1];var a=e[r];var o=t[r-1];var s=t[r];return o+u([i,a],n)/l(o,s)}function w(e,t,n){if(n>=100)return e.slice(-1)[0];var r=f(n,t);var i=e[r-1];var a=e[r];var o=t[r-1];var s=t[r];return c([i,a],(n-o)*l(o,s))}function y(e,t,n,r){if(r===100)return r;var i=f(r,e);var a=e[i-1];var o=e[i];if(n){if(r-a>(o-a)/2)return o;return a}if(!t[i-1])return r;return e[i-1]+s(r-e[i-1],t[i-1])}t[t["None"]=-1]="None",t[t["NoValue"]=0]="NoValue",t[t["LargeValue"]=1]="LargeValue",t[t["SmallValue"]=2]="SmallValue";var d=function(){function e(t,e,n){this.xPct=[];this.xVal=[];this.xSteps=[];this.xNumSteps=[];this.xHighestCompleteStep=[];this.xSteps=[n||false];this.xNumSteps=[false];this.snap=e;var r;var i=[];Object.keys(t).forEach(function(e){i.push([_e(t[e]),e])});i.sort(function(e,t){return e[0][0]-t[0][0]});for(r=0;r<i.length;r++)this.handleEntryPoint(i[r][1],i[r][0]);this.xNumSteps=this.xSteps.slice(0);for(r=0;r<this.xNumSteps.length;r++)this.handleStepPoint(r,this.xNumSteps[r])}e.prototype.getDistance=function(e){var t=[];for(var n=0;n<this.xNumSteps.length-1;n++)t[n]=a(this.xVal,e,n);return t};e.prototype.getAbsoluteDistance=function(e,t,n){var r=0;if(e<this.xPct[this.xPct.length-1])while(e>this.xPct[r+1])r++;else if(e===this.xPct[this.xPct.length-1])r=this.xPct.length-2;if(!n&&e===this.xPct[r+1])r++;if(t===null)t=[];var i;var a=1;var o=t[r];var s=0;var l=0;var u=0;var c=0;if(n)i=(e-this.xPct[r])/(this.xPct[r+1]-this.xPct[r]);else i=(this.xPct[r+1]-e)/(this.xPct[r+1]-this.xPct[r]);while(o>0){s=this.xPct[r+1+c]-this.xPct[r+c];if(t[r+c]*a+100-i*100>100){l=s*i;a=(o-100*i)/t[r+c];i=1}else{l=t[r+c]*s/100*a;a=0}if(n){u=u-l;if(this.xPct.length+c>=1)c--}else{u=u+l;if(this.xPct.length-c>=1)c++}o=t[r+c]*a}return e+u};e.prototype.toStepping=function(e){e=p(this.xVal,this.xPct,e);return e};e.prototype.fromStepping=function(e){return w(this.xVal,this.xPct,e)};e.prototype.getStep=function(e){e=y(this.xPct,this.xSteps,this.snap,e);return e};e.prototype.getDefaultStep=function(e,t,n){var r=f(e,this.xPct);if(e===100||t&&e===this.xPct[r-1])r=Math.max(r-1,1);return(this.xVal[r]-this.xVal[r-1])/n};e.prototype.getNearbySteps=function(e){var t=f(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}};e.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(i);return Math.max.apply(null,e)};e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]};e.prototype.convert=function(e){return this.getStep(this.toStepping(e))};e.prototype.handleEntryPoint=function(e,t){var n;if(e==="min")n=0;else if(e==="max")n=100;else n=parseFloat(e);if(!o(n)||!o(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n);this.xVal.push(t[0]);var r=Number(t[1]);if(!n){if(!isNaN(r))this.xSteps[0]=r}else this.xSteps.push(isNaN(r)?false:r);this.xHighestCompleteStep.push(0)};e.prototype.handleStepPoint=function(e,t){if(!t)return;if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=a([this.xVal[e],this.xVal[e+1]],t,0)/l(this.xPct[e],this.xPct[e+1]);var n=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e];var r=Math.ceil(Number(n.toFixed(3))-1);var i=this.xVal[e]+this.xNumSteps[e]*r;this.xHighestCompleteStep[e]=i};return e}(),h={to:function(e){return e===undefined?"":e.toFixed(2)},from:Number},m={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},De={tooltips:".__tooltips",aria:".__aria"};function b(e,t){if(!o(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function x(e,t){if(!o(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function S(e,t){if(!o(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function E(e,t){if(!o(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function C(e,t){if(typeof t!=="object"||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(t.min===undefined||t.max===undefined)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new d(t,e.snap||false,e.singleStep)}function P(e,t){t=_e(t);if(!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length;e.start=t}function N(e,t){if(typeof t!=="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function k(e,t){if(typeof t!=="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function M(e,t){if(typeof t!=="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function _(e,t){var n=[false];var r;if(t==="lower")t=[true,false];else if(t==="upper")t=[false,true];if(t===true||t===false){for(r=1;r<e.handles;r++)n.push(t);n.push(false)}else if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");else n=t;e.connect=n}function L(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function v(e,t){if(!o(t))throw new Error("noUiSlider: 'margin' option must be numeric.");if(t===0)return;e.margin=e.spectrum.getDistance(t)}function A(e,t){if(!o(t))throw new Error("noUiSlider: 'limit' option must be numeric.");e.limit=e.spectrum.getDistance(t);if(!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function V(e,t){var n;if(!o(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&!(t.length===2||o(t[0])||o(t[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(t===0)return;if(!Array.isArray(t))t=[t,t];e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])];for(n=0;n<e.spectrum.xNumSteps.length-1;n++)if(e.padding[0][n]<0||e.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var r=t[0]+t[1];var i=e.spectrum.xVal[0];var a=e.spectrum.xVal[e.spectrum.xVal.length-1];if(r/(a-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}function O(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function T(e,t){if(typeof t!=="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=t.indexOf("tap")>=0;var r=t.indexOf("drag")>=0;var i=t.indexOf("fixed")>=0;var a=t.indexOf("snap")>=0;var o=t.indexOf("hover")>=0;var s=t.indexOf("unconstrained")>=0;var l=t.indexOf("drag-all")>=0;var u=t.indexOf("smooth-steps")>=0;if(i){if(e.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");v(e,e.start[1]-e.start[0])}if(s&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:n||a,drag:r,dragAll:l,smoothSteps:u,fixed:i,snap:a,hover:o,unconstrained:s}}function U(e,t){if(t===false)return;if(t===true||r(t)){e.tooltips=[];for(var n=0;n<e.handles;n++)e.tooltips.push(t)}else{t=_e(t);if(t.length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.forEach(function(e){if(typeof e!=="boolean"&&!r(e))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")});e.tooltips=t}}function z(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function D(e,t){if(!r(t))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=t}function j(e,t){if(!n(t))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=t}function R(e,t){if(typeof t!=="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function F(e,t){e.documentElement=t}function H(e,t){if(typeof t!=="string"&&t!==false)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function $(t,n){if(typeof n!=="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");if(typeof t.cssPrefix==="string"){t.cssClasses={};Object.keys(n).forEach(function(e){t.cssClasses[e]=t.cssPrefix+n[e]})}else t.cssClasses=n}function je(t){var n={margin:null,limit:null,padding:null,animate:true,animationDuration:300,ariaFormat:h,format:h};var r={step:{r:false,t:b},keyboardPageMultiplier:{r:false,t:x},keyboardMultiplier:{r:false,t:S},keyboardDefaultStep:{r:false,t:E},start:{r:true,t:P},connect:{r:true,t:_},direction:{r:true,t:O},snap:{r:false,t:N},animate:{r:false,t:k},animationDuration:{r:false,t:M},range:{r:true,t:C},orientation:{r:false,t:L},margin:{r:false,t:v},limit:{r:false,t:A},padding:{r:false,t:V},behaviour:{r:true,t:T},ariaFormat:{r:false,t:D},format:{r:false,t:j},tooltips:{r:false,t:U},keyboardSupport:{r:true,t:R},documentElement:{r:false,t:F},cssPrefix:{r:true,t:H},cssClasses:{r:true,t:$},handleAttributes:{r:false,t:z}};var i={connect:false,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:true,cssPrefix:"noUi-",cssClasses:m,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};if(t.format&&!t.ariaFormat)t.ariaFormat=t.format;Object.keys(r).forEach(function(e){if(!Ee(t[e])&&i[e]===undefined){if(r[e].r)throw new Error("noUiSlider: '"+e+"' is required.");return}r[e].t(n,!Ee(t[e])?i[e]:t[e])});n.pips=t.pips;var e=document.createElement("div");var a=e.style.msTransform!==undefined;var o=e.style.transform!==undefined;n.transformRule=o?"transform":a?"msTransform":"webkitTransform";var s=[["left","top"],["right","bottom"]];n.style=s[n.dir][n.ort];return n}function B(e,g,a){var l=Te();var z=ze();var D=z&&Ue();var u=e;var r;var c;var f;var i;var o;var S=g.spectrum;var w=[];var y=[];var p=[];var d=0;var s={};var h=e.ownerDocument;var m=g.documentElement||h.documentElement;var v=h.body;var j=h.dir==="rtl"||g.ort===1?0:100;function b(e,t){var n=h.createElement("div");if(t)Le(n,t);e.appendChild(n);return n}function R(e,t){var n=b(e,g.cssClasses.origin);var r=b(n,g.cssClasses.handle);b(r,g.cssClasses.touchArea);r.setAttribute("data-handle",String(t));if(g.keyboardSupport){r.setAttribute("tabindex","0");r.addEventListener("keydown",function(e){return ae(e,t)})}if(g.handleAttributes!==undefined){var i=g.handleAttributes[t];Object.keys(i).forEach(function(e){r.setAttribute(e,i[e])})}r.setAttribute("role","slider");r.setAttribute("aria-orientation",g.ort?"vertical":"horizontal");if(t===0)Le(r,g.cssClasses.handleLower);else if(t===g.handles-1)Le(r,g.cssClasses.handleUpper);return n}function F(e,t){if(!t)return false;return b(e,g.cssClasses.connect)}function H(e,t){var n=b(t,g.cssClasses.connects);c=[];f=[];f.push(F(n,e[0]));for(var r=0;r<g.handles;r++){c.push(R(t,r));p[r]=r;f.push(F(n,e[r+1]))}}function $(e){Le(e,g.cssClasses.target);if(g.dir===0)Le(e,g.cssClasses.ltr);else Le(e,g.cssClasses.rtl);if(g.ort===0)Le(e,g.cssClasses.horizontal);else Le(e,g.cssClasses.vertical);var t=getComputedStyle(e).direction;if(t==="rtl")Le(e,g.cssClasses.textDirectionRtl);else Le(e,g.cssClasses.textDirectionLtr);return b(e,g.cssClasses.base)}function B(e,t){if(!g.tooltips||!g.tooltips[t])return false;return b(e.firstChild,g.cssClasses.tooltip)}function I(){return u.hasAttribute("disabled")}function x(e){var t=c[e];return t.hasAttribute("disabled")}function E(){if(o){n("update"+De.tooltips);o.forEach(function(e){if(e)Se(e)});o=null}}function Z(){E();o=c.map(B);t("update"+De.tooltips,function(e,t,n){if(!o||!g.tooltips)return;if(o[t]===false)return;var r=e[t];if(g.tooltips[t]!==true)r=g.tooltips[t].to(n[t]);o[t].innerHTML=r})}function X(){n("update"+De.aria);t("update"+De.aria,function(e,t,o,n,s){p.forEach(function(e){var t=c[e];var n=L(y,e,0,true,true,true);var r=L(y,e,100,true,true,true);var i=s[e];var a=String(g.ariaFormat.to(o[e]));n=S.fromStepping(n).toFixed(1);r=S.fromStepping(r).toFixed(1);i=S.fromStepping(i).toFixed(1);t.children[0].setAttribute("aria-valuemin",n);t.children[0].setAttribute("aria-valuemax",r);t.children[0].setAttribute("aria-valuenow",i);t.children[0].setAttribute("aria-valuetext",a)})})}function Y(e){if(e.mode===xe.PipsMode.Range||e.mode===xe.PipsMode.Steps)return S.xVal;if(e.mode===xe.PipsMode.Count){if(e.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");var t=e.values-1;var n=100/t;var r=[];while(t--)r[t]=t*n;r.push(100);return W(r,e.stepped)}if(e.mode===xe.PipsMode.Positions)return W(e.values,e.stepped);if(e.mode===xe.PipsMode.Values){if(e.stepped)return e.values.map(function(e){return S.fromStepping(S.getStep(S.toStepping(e)))});return e.values}return[]}function W(e,t){return e.map(function(e){return S.fromStepping(t?S.getStep(e):e)})}function q(m){function v(e,t){return Number((e+t).toFixed(7))}var g=Y(m);var w={};var e=S.xVal[0];var t=S.xVal[S.xVal.length-1];var y=false;var b=false;var x=0;g=Pe(g.slice().sort(function(e,t){return e-t}));if(g[0]!==e){g.unshift(e);y=true}if(g[g.length-1]!==t){g.push(t);b=true}g.forEach(function(e,t){var n;var r;var i;var a=e;var o=g[t+1];var s;var l;var u;var c;var f;var p;var d;var h=m.mode===xe.PipsMode.Steps;if(h)n=S.xNumSteps[t];if(!n)n=o-a;if(o===undefined)o=a;n=Math.max(n,1e-7);for(r=a;r<=o;r=v(r,n)){s=S.toStepping(r);l=s-x;f=l/(m.density||1);p=Math.round(f);d=l/p;for(i=1;i<=p;i+=1){u=x+i*d;w[u.toFixed(5)]=[S.fromStepping(u),0]}c=g.indexOf(r)>-1?xe.PipsType.LargeValue:h?xe.PipsType.SmallValue:xe.PipsType.NoValue;if(!t&&y&&r!==o)c=0;if(!(r===o&&b))w[s.toFixed(5)]=[r,c];x=s}});return w}function K(t,i,a){var e,n;var o=h.createElement("div");var s=(e={},e[xe.PipsType.None]="",e[xe.PipsType.NoValue]=g.cssClasses.valueNormal,e[xe.PipsType.LargeValue]=g.cssClasses.valueLarge,e[xe.PipsType.SmallValue]=g.cssClasses.valueSub,e);var l=(n={},n[xe.PipsType.None]="",n[xe.PipsType.NoValue]=g.cssClasses.markerNormal,n[xe.PipsType.LargeValue]=g.cssClasses.markerLarge,n[xe.PipsType.SmallValue]=g.cssClasses.markerSub,n);var u=[g.cssClasses.valueHorizontal,g.cssClasses.valueVertical];var c=[g.cssClasses.markerHorizontal,g.cssClasses.markerVertical];Le(o,g.cssClasses.pips);Le(o,g.ort===0?g.cssClasses.pipsHorizontal:g.cssClasses.pipsVertical);function f(e,t){var n=t===g.cssClasses.value;var r=n?u:c;var i=n?s:l;return t+" "+r[g.ort]+" "+i[e]}function r(e,t,n){n=i?i(t,n):n;if(n===xe.PipsType.None)return;var r=b(o,false);r.className=f(n,g.cssClasses.marker);r.style[g.style]=e+"%";if(n>xe.PipsType.NoValue){r=b(o,false);r.className=f(n,g.cssClasses.value);r.setAttribute("data-value",String(t));r.style[g.style]=e+"%";r.innerHTML=String(a.to(t))}}Object.keys(t).forEach(function(e){r(e,t[e][0],t[e][1])});return o}function C(){if(i){Se(i);i=null}}function P(e){C();var t=q(e);var n=e.filter;var r=e.format||{to:function(e){return String(Math.round(e))}};i=u.appendChild(K(t,n,r));return i}function Q(){var e=r.getBoundingClientRect();var t="offset"+["Width","Height"][g.ort];return g.ort===0?e.width||r[t]:e.height||r[t]}function N(n,r,i,a){var t=function(e){var t=G(e,a.pageOffset,a.target||r);if(!t)return false;if(I()&&!a.doNotReject)return false;if(Ve(u,g.cssClasses.tap)&&!a.doNotReject)return false;if(n===l.start&&t.buttons!==undefined&&t.buttons>1)return false;if(a.hover&&t.buttons)return false;if(!D)t.preventDefault();t.calcPoint=t.points[g.ort];i(t,a);return};var o=[];n.split(" ").forEach(function(e){r.addEventListener(e,t,D?{passive:true}:false);o.push([e,t])});return o}function G(n,e,r){var t=n.type.indexOf("touch")===0;var i=n.type.indexOf("mouse")===0;var a=n.type.indexOf("pointer")===0;var o=0;var s=0;if(n.type.indexOf("MSPointer")===0)a=true;if(n.type==="mousedown"&&!n.buttons&&!n.touches)return false;if(t){var l=function(e){var t=e.target;return t===r||r.contains(t)||n.composed&&n.composedPath().shift()===r};if(n.type==="touchstart"){var u=Array.prototype.filter.call(n.touches,l);if(u.length>1)return false;o=u[0].pageX;s=u[0].pageY}else{var c=Array.prototype.find.call(n.changedTouches,l);if(!c)return false;o=c.pageX;s=c.pageY}}e=e||Oe(h);if(i||a){o=n.clientX+e.x;s=n.clientY+e.y}n.pageOffset=e;n.points=[o,s];n.cursor=i||a;return n}function J(e){var t=e-Ne(r,g.ort);var n=t*100/Q();n=Me(n);return g.dir?100-n:n}function ee(s){var l=100;var u=false;c.forEach(function(e,t){if(x(t))return;var n=y[t];var r=Math.abs(n-s);var i=r===100&&l===100;var a=r<l;var o=r<=l&&s>n;if(a||o||i){u=t;l=r}});return u}function te(e,t){if(e.type==="mouseout"&&e.target.nodeName==="HTML"&&e.relatedTarget===null)k(e,t)}function ne(e,t){if(navigator.appVersion.indexOf("MSIE 9")===-1&&e.buttons===0&&t.buttonsProperty!==0)return k(e,t);var n=(g.dir?-1:1)*(e.calcPoint-t.startCalcPoint);var r=n*100/t.baseSize;le(n>0,r,t.locations,t.handleNumbers,t.connect)}function k(e,t){if(t.handle){Ae(t.handle,g.cssClasses.active);d-=1}t.listeners.forEach(function(e){m.removeEventListener(e[0],e[1])});if(d===0){Ae(u,g.cssClasses.drag);V();if(e.cursor){v.style.cursor="";v.removeEventListener("selectstart",Ce)}}if(g.events.smoothSteps){t.handleNumbers.forEach(function(e){O(e,y[e],true,true,false,false)});t.handleNumbers.forEach(function(e){_("update",e)})}t.handleNumbers.forEach(function(e){_("change",e);_("set",e);_("end",e)})}function M(e,t){if(t.handleNumbers.some(x))return;var n;if(t.handleNumbers.length===1){var r=c[t.handleNumbers[0]];n=r.children[0];d+=1;Le(n,g.cssClasses.active)}e.stopPropagation();var i=[];var a=N(l.move,m,ne,{target:e.target,handle:n,connect:t.connect,listeners:i,startCalcPoint:e.calcPoint,baseSize:Q(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:y.slice()});var o=N(l.end,m,k,{target:e.target,handle:n,listeners:i,doNotReject:true,handleNumbers:t.handleNumbers});var s=N("mouseout",m,te,{target:e.target,handle:n,listeners:i,doNotReject:true,handleNumbers:t.handleNumbers});i.push.apply(i,a.concat(o,s));if(e.cursor){v.style.cursor=getComputedStyle(e.target).cursor;if(c.length>1)Le(u,g.cssClasses.drag);v.addEventListener("selectstart",Ce,false)}t.handleNumbers.forEach(function(e){_("start",e)})}function re(e){e.stopPropagation();var t=J(e.calcPoint);var n=ee(t);if(n===false)return;if(!g.events.snap)ke(u,g.cssClasses.tap,g.animationDuration);O(n,t,true,true);V();_("slide",n,true);_("update",n,true);if(!g.events.snap){_("change",n,true);_("set",n,true)}else M(e,{handleNumbers:[n]})}function ie(e){var t=J(e.calcPoint);var n=S.getStep(t);var r=S.fromStepping(n);Object.keys(s).forEach(function(e){if("hover"===e.split(".")[0])s[e].forEach(function(e){e.call(U,r)})})}function ae(e,t){if(I()||x(t))return false;var n=["Left","Right"];var r=["Down","Up"];var i=["PageDown","PageUp"];var a=["Home","End"];if(g.dir&&!g.ort)n.reverse();else if(g.ort&&!g.dir){r.reverse();i.reverse()}var o=e.key.replace("Arrow","");var s=o===i[0];var l=o===i[1];var u=o===r[0]||o===n[0]||s;var c=o===r[1]||o===n[1]||l;var f=o===a[0];var p=o===a[1];if(!u&&!c&&!f&&!p)return true;e.preventDefault();var d;if(c||u){var h=u?0:1;var m=ge(t);var v=m[h];if(v===null)return false;if(v===false)v=S.getDefaultStep(y[t],u,g.keyboardDefaultStep);if(l||s)v*=g.keyboardPageMultiplier;else v*=g.keyboardMultiplier;v=Math.max(v,1e-7);v=(u?-1:1)*v;d=w[t]+v}else if(p)d=g.spectrum.xVal[g.spectrum.xVal.length-1];else d=g.spectrum.xVal[0];O(t,S.toStepping(d),true,true);_("slide",t);_("update",t);_("change",t);_("set",t);return false}function oe(s){if(!s.fixed)c.forEach(function(e,t){N(l.start,e.children[0],M,{handleNumbers:[t]})});if(s.tap)N(l.start,r,re,{});if(s.hover)N(l.move,r,ie,{hover:true});if(s.drag)f.forEach(function(t,e){if(t===false||e===0||e===f.length-1)return;var n=c[e-1];var r=c[e];var i=[t];var a=[n,r];var o=[e-1,e];Le(t,g.cssClasses.draggable);if(s.fixed){i.push(n.children[0]);i.push(r.children[0])}if(s.dragAll){a=c;o=p}i.forEach(function(e){N(l.start,e,M,{handles:a,handleNumbers:o,connect:t})})})}function t(e,t){s[e]=s[e]||[];s[e].push(t);if(e.split(".")[0]==="update")c.forEach(function(e,t){_("update",t)})}function se(e){return e===De.aria||e===De.tooltips}function n(e){var r=e&&e.split(".")[0];var i=r?e.substring(r.length):e;Object.keys(s).forEach(function(e){var t=e.split(".")[0];var n=e.substring(t.length);if((!r||r===t)&&(!i||i===n))if(!se(n)||i===n)delete s[e]})}function _(n,r,i){Object.keys(s).forEach(function(e){var t=e.split(".")[0];if(n===t)s[e].forEach(function(e){e.call(U,w.map(g.format.to),r,w.slice(),i||false,y.slice(),U)})})}function L(e,t,n,r,i,a,o){var s;if(c.length>1&&!g.events.unconstrained){if(r&&t>0){s=S.getAbsoluteDistance(e[t-1],g.margin,false);n=Math.max(n,s)}if(i&&t<c.length-1){s=S.getAbsoluteDistance(e[t+1],g.margin,true);n=Math.min(n,s)}}if(c.length>1&&g.limit){if(r&&t>0){s=S.getAbsoluteDistance(e[t-1],g.limit,false);n=Math.min(n,s)}if(i&&t<c.length-1){s=S.getAbsoluteDistance(e[t+1],g.limit,true);n=Math.max(n,s)}}if(g.padding){if(t===0){s=S.getAbsoluteDistance(0,g.padding[0],false);n=Math.max(n,s)}if(t===c.length-1){s=S.getAbsoluteDistance(100,g.padding[1],true);n=Math.min(n,s)}}if(!o)n=S.getStep(n);n=Me(n);if(n===e[t]&&!a)return false;return n}function A(e,t){var n=g.ort;return(n?t:e)+", "+(n?e:t)}function le(e,r,n,t,i){var a=n.slice();var o=t[0];var s=g.events.smoothSteps;var l=[!e,e];var u=[e,!e];t=t.slice();if(e)t.reverse();if(t.length>1)t.forEach(function(e,t){var n=L(a,e,a[e]+r,l[t],u[t],false,s);if(n===false)r=0;else{r=n-a[e];a[e]=n}});else l=u=[true];var c=false;t.forEach(function(e,t){c=O(e,n[e]+r,l[t],u[t],false,s)||c});if(c){t.forEach(function(e){_("update",e);_("slide",e)});if(i!=undefined)_("drag",o)}}function ue(e,t){return g.dir?100-e-t:e}function ce(e,t){y[e]=t;w[e]=S.fromStepping(t);var n=ue(t,0)-j;var r="translate("+A(n+"%","0")+")";c[e].style[g.transformRule]=r;fe(e);fe(e+1)}function V(){p.forEach(function(e){var t=y[e]>50?-1:1;var n=3+(c.length+t*e);c[e].style.zIndex=String(n)})}function O(e,t,n,r,i,a){if(!i)t=L(y,e,t,n,r,false,a);if(t===false)return false;ce(e,t);return true}function fe(e){if(!f[e])return;var t=0;var n=100;if(e!==0)t=y[e-1];if(e!==f.length-1)n=y[e];var r=n-t;var i="translate("+A(ue(t,r)+"%","0")+")";var a="scale("+A(r/100,"1")+")";f[e].style[g.transformRule]=i+" "+a}function pe(e,t){if(e===null||e===false||e===undefined)return y[t];if(typeof e==="number")e=String(e);e=g.format.from(e);if(e!==false)e=S.toStepping(e);if(e===false||isNaN(e))return y[t];return e}function T(e,t,n){var r=_e(e);var i=y[0]===undefined;t=t===undefined?true:t;if(g.animate&&!i)ke(u,g.cssClasses.tap,g.animationDuration);p.forEach(function(e){O(e,pe(r[e],e),true,false,n)});var a=p.length===1?0:1;if(i&&S.hasNoSize()){n=true;y[0]=0;if(p.length>1){var o=100/(p.length-1);p.forEach(function(e){y[e]=e*o})}}for(;a<p.length;++a)p.forEach(function(e){O(e,y[e],true,true,n)});V();p.forEach(function(e){_("update",e);if(r[e]!==null&&t)_("set",e)})}function de(e){T(g.start,e)}function he(e,t,n,r){e=Number(e);if(!(e>=0&&e<p.length))throw new Error("noUiSlider: invalid handle number, got: "+e);O(e,pe(t,e),true,true,r);_("update",e);if(n)_("set",e)}function me(e){if(e===void 0)e=false;if(e)return w.length===1?w[0]:w.slice(0);var t=w.map(g.format.to);if(t.length===1)return t[0];return t}function ve(){n(De.aria);n(De.tooltips);Object.keys(g.cssClasses).forEach(function(e){Ae(u,g.cssClasses[e])});while(u.firstChild)u.removeChild(u.firstChild);delete u.noUiSlider}function ge(e){var t=y[e];var n=S.getNearbySteps(t);var r=w[e];var i=n.thisStep.step;var a=null;if(g.snap)return[r-n.stepBefore.startValue||null,n.stepAfter.startValue-r||null];if(i!==false)if(r+i>n.stepAfter.startValue)i=n.stepAfter.startValue-r;if(r>n.thisStep.startValue)a=n.thisStep.step;else if(n.stepBefore.step===false)a=false;else a=r-n.stepBefore.highestStep;if(t===100)i=null;else if(t===0)a=null;var o=S.countStepDecimals();if(i!==null&&i!==false)i=Number(i.toFixed(o));if(a!==null&&a!==false)a=Number(a.toFixed(o));return[a,i]}function we(){return p.map(ge)}function ye(t,e){var n=me();var r=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];r.forEach(function(e){if(t[e]!==undefined)a[e]=t[e]});var i=je(a);r.forEach(function(e){if(t[e]!==undefined)g[e]=i[e]});S=i.spectrum;g.margin=i.margin;g.limit=i.limit;g.padding=i.padding;if(g.pips)P(g.pips);else C();if(g.tooltips)Z();else E();y=[];T(Ee(t.start)?t.start:n,e)}function be(){r=$(u);H(g.connect,r);oe(g.events);T(g.start);if(g.pips)P(g.pips);if(g.tooltips)Z();X()}be();var U={destroy:ve,steps:we,on:t,off:n,get:me,set:T,setHandle:he,reset:de,__moveHandles:function(e,t,n){le(e,t,y,n)},options:a,updateOptions:ye,target:u,removePips:C,removeTooltips:E,getPositions:function(){return y.slice()},getTooltips:function(){return o},getOrigins:function(){return c},pips:P};return U}function g(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=je(t);var r=B(e,n,t);e.noUiSlider=r;return r}var I={__spectrum:d,cssClasses:m,create:g};xe.create=g,xe.cssClasses=m,xe["default"]=I,Object.defineProperty(xe,"__esModule",{value:true})}(t)}},r={};function i(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},n[e].call(t.exports,t,t.exports,i)),t.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};!function(){"use strict";i(99);var e=i(211),w=i.n(e);$(function(){let u=$("#jsUserPhoto"),c=u.children("img"),f=u.children(".text-muted"),p=$("#jsUploadUserPhotoRules"),d=$("<div>",{class:"alert alert-danger"}),h=u.children(".btn"),m=u.children('[type="file"]'),v=$("<div>",{class:"profile__user-photo-add btn d-flex flex-column justify-content-center align-items-center",append:$("<div>",{class:"spinner-border mb-1"}).add("<div>",{class:"mt-1",text:" "})}),g=u.children(".csrf");h.on("click",function(e){e.preventDefault(),m.click()}),m.change(function(e){var n,t=$(this).get(0).files;if(!(t.length<=0)){let l=t[0].name;FileReader&&t&&t.length&&((n=new FileReader).onload=function(e){let i=$("<img>",{src:n.result,class:"mr-1 mb-1"}),t=$("<button>",{type:"button",class:"btn btn-primary",text:""}),a=$("<div>",{height:230,class:"mb-2"}),o=$("<div>",{width:230,class:"mr-2"}),s=$("<div>",{class:"modal fade",id:"profilePhotoCrop",tabindex:-1,role:"dialog","aria-hidden":"false",append:$("<div>",{class:"modal-dialog modal-dialog-centered",role:"document",append:$("<div>",{class:"modal-content",append:$("<div>",{class:"modal-header",append:$("<h5>",{class:"modal-title",text:" "}).add($("<button>",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",append:$("<span>",{"aria-hidden":"true",html:"&times;"})}))}).add($("<div>",{class:"modal-body",append:$("<div>",{class:"d-flex justify-content-center align-items-center",append:i}).add($("<div>",{class:"d-flex justify-content-center align-items-center photo-crop__rotate",append:$("<i>",{"data-feather":"rotate-ccw",class:"feather-18 d-block mr-2"}).add(o).add("<i>",{"data-feather":"rotate-cw",class:"feather-18 d-block"})}))})).add($("<div>",{class:"modal-footer",append:$("<button>",{type:"button",class:"btn btn-secondary","data-dismiss":"modal",text:""}).add(t)}))})})});$("body").append(s),feather.replace(),s.on("shown.bs.modal",function(e){i.croppie({enableOrientation:!0,enableExif:!0,viewport:{width:150,height:200,type:"square"},boundary:{width:300,height:300},customClass:"photo__crop",showZoomer:!1}),$(".photo__crop").after($("<div>",{class:"d-flex flex-column justify-content-center align-items-center photo-crop__zoom",append:$("<i>",{"data-feather":"zoom-in",class:"feather-18 mb-2"}).add(a).add("<i>",{"data-feather":"zoom-out",class:"feather-18"})})),w().create(o[0],{range:{min:-180,max:180},start:0,step:90}),feather.replace();let n=!1,r=0;$(".photo__crop").on("update.croppie",function(e,t){w().create(a[0],{range:{min:parseFloat($(".photo__crop").find(".cr-slider").attr("min")),max:parseFloat($(".photo__crop").find(".cr-slider").attr("max"))},direction:"rtl",start:0,orientation:"vertical"}),$(".photo__crop").off("update.croppie"),n||a[0].noUiSlider.set(t.zoom),a[0].noUiSlider.on("slide",function(e,t){i.croppie("setZoom",parseFloat(e[0]))}),a[0].noUiSlider.on("start",function(e,t){n=!0}),a[0].noUiSlider.on("end",function(e,t){n=!1}),$(".photo__crop").on("update.croppie",function(e,t){n||a[0].noUiSlider.set(t.zoom)})}),o[0].noUiSlider.on("slide",function(e,t){i.croppie("rotate",r-parseFloat(e[0])),r=parseFloat(e[0])});t.on("click",function(){i.croppie("result",{format:"jpeg",circle:!1,type:"blob",size:"original"}).then(function(e){d.remove(),h.remove(),c.remove(),v.appendTo(u),f.appendTo(u),p.appendTo(u);var t=new FormData;t.append("file",e,l.split(".").slice(0,-1).join(".")+".jpg"),t.append(g.data("name"),g.data("value")),$.ajax({url:"/upload/default/user-photo",data:t,processData:!1,contentType:!1,type:"POST",success:function(e){v.remove(),$("<div>",{class:"profile__user-photo-add w-100 m-0 d-flex flex-column justify-content-center align-items-center",append:$("<i>",{"data-feather":"check-circle"}).add("<div>",{class:"mt-1",text:" "})}).appendTo(u),f.remove(),p.appendTo(u),feather.replace()},error:function(e,t){v.remove();let n="";if(4==e.readyState){var r,i=JSON.parse(e.responseText);for(r in i.errors)n+=i.errors[r].join("<br>");h.appendTo(u)}else n=(e.readyState,e.statusText);d.html(n),0<c.length&&c.appendTo(u),h.appendTo(u),f.appendTo(u),p.appendTo(u),d.appendTo(u),feather.replace(),h.on("click",function(e){e.preventDefault(),m.click()})}}),s.modal("hide")})})}),s.on("hidden.bs.modal",function(e){s.remove()}),s.modal("show")},n.readAsDataURL(t[0]))}})})}()}();
//# sourceMappingURL=upload_user_photo.js.map